<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>Code</title>

	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600|Source+Code+Pro:200,300,400,500,600,700,900" media="all">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.css" media="all">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/css/bootstrap.min.css" media="all">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/tomorrow.min.css" media="all">
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/languages/ocaml.min.js"></script>
	<style>
		* {
			-webkit-font-smoothing:antialiased;
			-moz-osx-font-smoothing:grayscale;
		}
		body {
			font-family:'Open Sans', sans-serif;
			background-color:transparent;
		}
		code, kbd, pre, samp {
			font-family:'Source Code Pro', Menlo, Monaco, Consolas, 'Courier New', monospace;
		}
		#embed {
			position:relative;
			border-radius:4px;
			border:1px solid #C7C7C7;
			border:1px solid rgba(0, 0, 0, .22);
			background-color:#FFFFFF;
			box-shadow:1px 0px 3px rgba(0, 0, 0, .15);
			-moz-background-clip:padding;
			-webkit-background-clip:padding-box;
			background-clip:padding-box;
		}
		#embed header {
			height:50px;
			border-bottom:1px solid #EAEAEA;
			background-color:#FCFCFC;
			border-top-left-radius:4px;
			border-top-right-radius:4px;
		}
		#embed .nav-tabs {
			border:0;
			height:51px;
			width:5000px;
			position:absolute;
		}
		#embed .nav-tabs>li {
			margin-bottom:0;
		}
		#embed .nav-tabs>li a, #embed .nav-tabs>li a:focus {
			border-top:none;
			border-bottom:none;
			border-radius:0;
			color:#8C9093;
			font-size:13px;
			font-weight:600;
			padding:16px;
			margin-right:0;
		}
		#embed .nav-tabs>li:not(.active) a:hover {
			color:#41484C;
			background-color:#FCFCFC;
		}
		#embed .nav-tabs .open>a {
			border-color:#E6E6E6;
			background-color:#FCFCFC;
		}
		#embed .nav-tabs {
			border-top-left-radius:4px;
			border-top-right-radius:4px;
		}
		#embed .nav-tabs>li:first-of-type>a {
			border-left:none;
			border-top-left-radius:4px;
		}
		#embed .nav-tabs>li.active>a, #embed .nav-tabs>li.active>a:focus, #embed .nav-tabs>li.active>a:hover {
			color:#216FA6;
			border-color:#E6E6E6;
		}
		#embed .nav-tabs>.dropdown.active>a {
			color:#41484C;
		}
		#embed .nav-tabs>.dropdown>.dropdown-menu a .fa {
			opacity:0;
		}
		#embed .nav-tabs>.dropdown.active>.dropdown-menu>.active>a .fa {
			opacity:1;
		}
		#embed .nav-tabs>.dropdown.active>.dropdown-menu>.active>a, #embed .nav-tabs>.dropdown.active>.dropdown-menu>.active>a:focus, #embed .nav-tabs>.dropdown.active>.dropdown-menu>.active>a:hover {
			color:#216FA6;
			background-color:#F2F9FF;
		}
		#embed .dropdown-menu {
			padding:0;
			border-radius:0;
			border-top:0;
			margin-top:0;
			background-color:#FCFCFC;
			box-shadow:0 3px 3px rgba(0, 0, 0, .15);
		}
		#embed .btn-dropdown {
			position:absolute;
			top:0;
			right:0;
		}
		#embed .btn-dropdown .btn {
			border:0;
			border-radius:0;
			padding:15px;
			background-color:transparent;
		}
		#embed .btn-dropdown .dropdown-menu {
			overflow:auto;
		}
		#embed .btn-dropdown .dropdown-menu .fa {
			display:none;
		}
		#embed .btn-dropdown .dropdown-menu>.active .fa {
			display:inline-block;
		}
		#embed .btn-dropdown .dropdown-menu>li>a {
			padding:10px;
			color:#8C9093;
		}
		#embed .btn-dropdown .dropdown-menu>.dropdown-header {
			padding:10px;
			font-weight:700;
		}
		#embed .btn-dropdown .dropdown-menu>.active>a, #embed .btn-dropdown .dropdown-menu>.active>a:focus, #embed .btn-dropdown .dropdown-menu>.active>a:hover {
			color:#216FA6;
			background-color:#F2F9FF;
		}
		#embed .tab-content .tab-pane, #embed .tab-content .tab-pane pre, #embed .tab-content .tab-pane pre code {
			height:100%;
			white-space:pre;
			word-break:normal;
			word-wrap:normal;
		}
		#embed .tab-content .tab-pane .btn-clipboard {
			position:absolute;
			bottom:4px;
			right:5px;
			border-color:#D7D9DB;
			color:#399ee5;
			font-size:11px;
			font-weight:600;
			padding:3px 7px;
			background:#F7F7F7;
			background:-moz-linear-gradient(0deg, #F7F7F7 0%, #FFFFFF 100%);
			background:-webkit-linear-gradient(0deg, #F7F7F7 0%, #FFFFFF 100%);
			background:-o-linear-gradient(0deg, #F7F7F7 0%, #FFFFFF 100%);
			background:-ms-linear-gradient(0deg, #F7F7F7 0%, #FFFFFF 100%);
			background:linear-gradient(0deg, #F7F7F7 0%, #FFFFFF 100%);
		}
		#embed footer {
			padding:10px 15px;
			color:#7b858c;
			font-size:11px;
			font-weight:600;
			border-top:1px solid #E6E6E6;
			border-bottom-left-radius:4px;
			border-bottom-right-radius:4px;
			background-color:#FFFFFF;
		}
		#embed footer a {
			color:#7b858c;
		}
		#embed:hover footer a {
			color:#399ee5;
		}
		#embed pre {
			margin:0;
			padding:0;
			border:none;
			border-radius:0;
			background-color:#FFFFFF;
		}
		#embed pre code {
			padding:15px;
		}
		.hljs {
			padding:0;
		}
	</style>


</head>
<body marginwidth="0" marginheight="0">
<div id="embed">
	<header>
		<ul class="nav nav-tabs">
			<%
			for(var target in output){
				var code = output[target];
				var clients = (typeof code === 'string')?false:ObjectKeys(code);
				console.dir(target)
				console.dir(code)
				console.dir(clients)
				console.log("+++++++++++++++++")

				if(!clients){
 			%>
				<li><a href="#<%=target%>" data-toggle='tab')><%=namedTargets[target].title%></a></li>
			<%  } else if (clients.length === 1){%>
				<li><a href="#<%=target%>-<%=clients[0]%>" data-toggle='tab')><%=namedTargets[target].title%></a></li>

			<%  } else{%>
				<li class="dropdown">
					<a href="#<%=target%>" data-toggle="dropdown" class="dropdown-toggle">
						<span><%=namedTargets[target].title%></span><span> </span><span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<%
							for(var client in code){
						%>
						<li><a href="#<%=target%>-<%=client%>" data-toggle="tab"><i class="fa fa-check"></i> <%=namedTargets[target].clients[client].title%></a></li>
						<% }%>
					</ul>
				</li>
			<%	}%>

			<%}%>
		</ul>


		<div class="btn-dropdown dropdown pull-right" id="all_lang">
			<button type="button" data-toggle="dropdown" class="btn btn-default dropdown-toggle" id="all_lang_btn"><i class="fa fa-bars"></i>
			</button>
			<ul class="dropdown-menu">
				<%
				for(var target in output){
					var code = output[target];
					var clients = (typeof code === 'string')?false:ObjectKeys(code);
					if(!clients){
				%>
				<li><a href="#<%=target%>" data-toggle="tab" ><i class="fa fa-check"></i> <%=namedTargets[target].title%></a></li>
				<%  } else if (clients.length === 1){%>
				<li><a href="#<%=target%>-<%=clients[0]%>" data-toggle="tab" ><i class="fa fa-check"></i> <%=namedTargets[target].title%></a></li>
				<%  } else{%>

				<%
					var tmp ="";
					for(var client in code) {
						tmp+="#"+target+"-"+client+",";
					}
					tmp=tmp.substring(0,tmp.length-1);
				%>
				<li data-clients="<%=tmp%>" class="dropdown-header "><%=namedTargets[target].title%></li>


				<%for(var client in code){%>
				<li><a href="#<%=target%>-<%=client%>" data-toggle="tab" ><i class="fa fa-check"></i> <%=namedTargets[target].clients[client].title%></a></li>
				<% }%>

				<%	}%>

				<%}%>

			</ul>
		</div>
	</header>





	<div class="tab-content">
		<%
		for(var target in output){
			var code = output[target];
			var clients = (typeof code === 'string')?false:ObjectKeys(code);
			console.dir(target)
			console.dir(code)
			console.dir(clients)
			console.log("+++++++++++++++++")

			if(typeof code === 'string'){
		%>
			<div id="<%=target%>" class="tab-pane fade">
				<pre style="margin-top:-40px">
					<code id="<%=target%>-code" class="<%=namedTargets[target].extname.replace('.', '')%>">
						<%=code%>
					</code>
				</pre>
			</div>

		<%}else{
			for(var _target in code){
		%>
			<div id="<%=target%>-<%=_target%>" class="tab-pane fade">
				<pre style="margin-top:-40px">
					<code id="<%=target%>-<%=_target%>-code" class="<%=namedTargets[target].extname.replace('.', '')%>">
						<%=code[_target]%>
					</code>
				</pre>
			</div>
		<%}}}%>

	</div>




	<footer></footer>


</div>












<script type="text/javascript">
	$(function () {

		// select first tab
		$('.nav-tabs a[data-toggle="tab"]:first').tab('show')


		$('.nav-tabs > li').each(function () {
			var tab = $(this)
			var link = tab.find('a')

			tab.removeClass('hidden')

			$('.btn-dropdown a[href*="' + link.attr('href') + '"]').removeClass('hidden')
			$('.btn-dropdown li[data-clients*="' + link.attr('href') + '"]').removeClass('hidden')

		})


		$('.dropdown-menu').css('max-height', $(this).height() - 100)


		// dropdown click events
		$('.btn-dropdown a[data-toggle="tab"]').on('click', function (e) {
			e.preventDefault()

			$('.btn-dropdown .active').removeClass('active')
			$('.nav-tabs .active').removeClass('active')

			$(this).tab('show');

			$('a[href="' + $(e.target).attr('href') + '"]').parent().addClass('active')
		});

		// highlight the code
		$('.tab-content pre code').each(function (i, block) {
			hljs.highlightBlock(block);
		});

	})
</script>







</body></html>